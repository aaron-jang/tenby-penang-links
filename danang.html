<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>다낭 한달 살기 플래너</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel Standalone for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons (using CDN) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            transition: background-color 0.3s ease;
        }
        body.dark-mode {
            background-color: #0f172a; /* slate-900 */
        }
        body.light-mode {
            background-color: #f1f5f9; /* slate-100 */
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide icon components as simple SVG
        const MapPin = ({ className, size = 24, fill, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill || "none"} stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
            </svg>
        );

        const Camera = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                <circle cx="12" cy="13" r="4"></circle>
            </svg>
        );

        const Coffee = ({ className, size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path>
                <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path>
                <line x1="6" y1="1" x2="6" y2="4"></line>
                <line x1="10" y1="1" x2="10" y2="4"></line>
                <line x1="14" y1="1" x2="14" y2="4"></line>
            </svg>
        );

        const Waves = ({ size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"></path>
                <path d="M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"></path>
                <path d="M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"></path>
            </svg>
        );

        const CheckCircle2 = ({ size = 24, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                <circle cx="12" cy="12" r="10"></circle>
                <path d="m9 12 2 2 4-4"></path>
            </svg>
        );

        const Info = ({ size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const Trash2 = ({ size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Sun = ({ size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
        );

        const Moon = ({ size = 24 }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        );

        const DaNangMonthStay = () => {
          // localStorage에서 저장된 데이터 불러오기
          const loadCompletedTasks = () => {
            try {
              const saved = localStorage.getItem('danang-completed-tasks');
              return saved ? JSON.parse(saved) : {};
            } catch (error) {
              console.error('Failed to load completed tasks:', error);
              return {};
            }
          };

          const [activeWeek, setActiveWeek] = useState(1);
          const [completedTasks, setCompletedTasks] = useState(loadCompletedTasks());
          const [isDarkMode, setIsDarkMode] = useState(() => {
            const saved = localStorage.getItem('danang-dark-mode');
            return saved ? JSON.parse(saved) : false;
          });

          // completedTasks가 변경될 때마다 localStorage에 저장
          useEffect(() => {
            try {
              localStorage.setItem('danang-completed-tasks', JSON.stringify(completedTasks));
            } catch (error) {
              console.error('Failed to save completed tasks:', error);
            }
          }, [completedTasks]);

          // 초기 body 클래스 설정
          useEffect(() => {
            if (isDarkMode) {
              document.body.classList.add('dark-mode');
              document.body.classList.remove('light-mode');
            } else {
              document.body.classList.add('light-mode');
              document.body.classList.remove('dark-mode');
            }
          }, []);

          // 다크모드 설정 저장 및 body 클래스 적용
          useEffect(() => {
            localStorage.setItem('danang-dark-mode', JSON.stringify(isDarkMode));
            if (isDarkMode) {
              document.body.classList.add('dark-mode');
              document.body.classList.remove('light-mode');
            } else {
              document.body.classList.add('light-mode');
              document.body.classList.remove('dark-mode');
            }
          }, [isDarkMode]);

          const toggleTask = (dayId, taskIndex) => {
            const key = `${dayId}-${taskIndex}`;
            setCompletedTasks(prev => ({
              ...prev,
              [key]: !prev[key]
            }));
          };

          // 모든 체크 초기화
          const resetAllTasks = () => {
            if (confirm('⚠️ 정말로 모든 체크를 삭제하시겠습니까?\n\n저장된 모든 일정 완료 내역이 영구적으로 삭제됩니다.\n이 작업은 되돌릴 수 없습니다.')) {
              setCompletedTasks({});
              localStorage.removeItem('danang-completed-tasks');
              alert('✅ 모든 체크가 초기화되었습니다.');
            }
          };

          // 다크모드 토글
          const toggleDarkMode = () => {
            setIsDarkMode(prev => !prev);
          };

          const scheduleData = {
            1: {
              title: "적응과 탐색",
              desc: "다낭의 분위기에 익숙해지는 첫 주",
              days: [
                { id: 'w1d1', day: '1일차', type: 'arrival', title: '다낭 도착 및 짐 풀기', activities: ['공항 픽업 후 숙소 이동', '숙소 주변 편의점 및 마트 파악', '가벼운 저녁 식사'] },
                { id: 'w1d2', day: '2일차', type: 'chill', title: '동네 산책과 환전', activities: ['한시장 금은방에서 환전', '콩카페 코코넛 커피 한잔', '숙소 수영장에서 휴식'] },
                { id: 'w1d3', day: '3일차', type: 'attraction', title: '✨ 핑크 성당 & 한시장', activities: ['핑크 성당 인증샷 찍기', '한시장 아오자이 맞추기', '저녁: 피자 4P\'s'] },
                { id: 'w1d4', day: '4일차', type: 'chill', title: '오전 요가 & 마사지', activities: ['해변가 모닝 요가', '로컬 쌀국수 맛집 탐방', '전신 마사지 (90분)'] },
                { id: 'w1d5', day: '5일차', type: 'attraction', title: '✨ 선짜 반도 (영흥사)', activities: ['해질녘 영흥사 레이디부다', '해산물 거리에서 저녁 식사', '미케비치 밤 산책'] },
                { id: 'w1d6', day: '6일차', type: 'chill', title: '롯데마트 장보기', activities: ['한달 살기 생필품 구매', '숙소에서 요리해 먹기', '넷플릭스 보며 휴식'] },
                { id: 'w1d7', day: '7일차', type: 'attraction', title: '✨ 용다리 불쇼', activities: ['선짜 야시장 구경', '용다리 물/불쇼 관람 (주말)', '한강 유람선 구경'] },
              ]
            },
            2: {
              title: "호이안의 매력",
              desc: "다낭 근교 호이안 집중 탐구",
              days: [
                { id: 'w2d1', day: '8일차', type: 'chill', title: '디지털 노마드 체험', activities: ['노트북 들고 오션뷰 카페 가기', '반미 맛집 비교하기', '숙소 헬스장 이용'] },
                { id: 'w2d2', day: '9일차', type: 'attraction', title: '✨ 호이안 올드타운', activities: ['오후 4시쯤 호이안 이동', '소원배 타기 & 야시장', '올드타운 야경 감상'] },
                { id: 'w2d3', day: '10일차', type: 'chill', title: '늦잠과 브런치', activities: ['느긋하게 기상', '서양식 브런치 카페', '스파에서 네일/페디케어'] },
                { id: 'w2d4', day: '11일차', type: 'attraction', title: '✨ 안방 비치', activities: ['호이안 안방 비치 데이트립', '라플라주에서 점심', '썬베드에서 독서'] },
                { id: 'w2d5', day: '12일차', type: 'chill', title: '현지인처럼 살아보기', activities: ['로컬 시장에서 과일 사기', '베트남어 3마디 배우기', '일몰 보며 맥주 한잔'] },
                { id: 'w2d6', day: '13일차', type: 'attraction', title: '✨ 바구니 배 체험', activities: ['코코넛 숲 바구니 배', '쿠킹 클래스 참여', '직접 만든 요리로 점심'] },
                { id: 'w2d7', day: '14일차', type: 'chill', title: '재충전의 시간', activities: ['아무것도 안 하고 뒹굴기', '그랩푸드 배달 시켜 먹기', '다음 주 일정 점검'] },
              ]
            },
            3: {
              title: "자연과 액티비티",
              desc: "다낭의 자연을 느끼는 주간",
              days: [
                { id: 'w3d1', day: '15일차', type: 'chill', title: '카페 투어', activities: ['인스타 핫플 카페 2곳 방문', '찍은 사진 정리', '마담란에서 저녁'] },
                { id: 'w3d2', day: '16일차', type: 'attraction', title: '✨ 바나힐 (하루 종일)', activities: ['오픈런으로 골든브릿지', '테마파크 즐기기', '케이블카 풍경 감상'] },
                { id: 'w3d3', day: '17일차', type: 'chill', title: '휴식과 회복', activities: ['바나힐 여독 풀기 (마사지)', '숙소 수영장', '한국 식당에서 김치찌개'] },
                { id: 'w3d4', day: '18일차', type: 'attraction', title: '✨ 오행산 (마블마운틴)', activities: ['오행산 동굴 탐험', '엘리베이터 타고 전망대', '논누옥 비치 산책'] },
                { id: 'w3d5', day: '19일차', type: 'chill', title: '쇼핑 데이', activities: ['빈컴 플라자 아이쇼핑', '고마트(빅씨) 기념품 구경', '하이랜드 커피'] },
                { id: 'w3d6', day: '20일차', type: 'attraction', title: '✨ 아시아 파크', activities: ['해질녘 썬휠 대관람차', '놀이기구 타기', '야간 뷔페 즐기기'] },
                { id: 'w3d7', day: '21일차', type: 'chill', title: '치맥 데이', activities: ['한국 치킨 배달', '영화 감상', '숙소 테라스 멍때리기'] },
              ]
            },
            4: {
              title: "아쉬움과 마무리",
              desc: "숨겨진 명소와 작별 준비",
              days: [
                { id: 'w4d1', day: '22일차', type: 'chill', title: '마지막 호캉스 기분', activities: ['조식 뷔페 천천히 즐기기', '오후 수영', '루프탑 바에서 칵테일'] },
                { id: 'w4d2', day: '23일차', type: 'attraction', title: '✨ 미카즈키 온천/워터파크', activities: ['일본식 온천 즐기기', '워터파크 슬라이드', '피로 풀기'] },
                { id: 'w4d3', day: '24일차', type: 'chill', title: '기념품 쇼핑', activities: ['부부샵/엘스토어 방문', '라탄백 구매', '가족 선물 준비'] },
                { id: 'w4d4', day: '25일차', type: 'attraction', title: '✨ 헬리오 야시장', activities: ['현지 먹거리 도장깨기', '라이브 공연 구경', '오락실 게임'] },
                { id: 'w4d5', day: '26일차', type: 'chill', title: '단골집 재방문', activities: ['가장 맛있었던 식당 다시 가기', '마사지 팁 넉넉히 주기', '짐 정리 시작'] },
                { id: 'w4d6', day: '27일차', type: 'attraction', title: '✨ 참 조각 박물관 & 산책', activities: ['박물관 가볍게 관람', '한강변 마지막 산책', '고급 레스토랑 파이널 디너'] },
                { id: 'w4d7', day: '28일차', type: 'arrival', title: '안녕, 다낭!', activities: ['체크아웃', '공항 샌딩', '한국으로 출발'] },
              ]
            },
          };

          const currentSchedule = scheduleData[activeWeek];

          const getTypeIcon = (type) => {
            switch (type) {
              case 'attraction': return <Camera className="w-5 h-5 text-rose-500" />;
              case 'chill': return <Coffee className="w-5 h-5 text-emerald-600" />;
              case 'arrival': return <MapPin className="w-5 h-5 text-blue-500" />;
              default: return <Coffee className="w-5 h-5 text-amber-500" />;
            }
          };

          const getTypeLabel = (type) => {
            switch (type) {
              case 'attraction': return '주요 관광';
              case 'chill': return '힐링 & 일상';
              case 'arrival': return '이동';
              default: return '일상';
            }
          };

          const getTypeStyle = (type) => {
            switch (type) {
              case 'attraction': return 'bg-rose-50 border-rose-100 text-rose-700';
              case 'chill': return 'bg-emerald-50 border-emerald-100 text-emerald-700';
              case 'arrival': return 'bg-blue-50 border-blue-100 text-blue-700';
              default: return 'bg-gray-50 border-gray-100 text-gray-700';
            }
          };

          return (
            <div className={`max-w-md mx-auto min-h-screen font-sans shadow-xl overflow-hidden transition-colors ${
              isDarkMode
                ? 'bg-slate-900 text-slate-100'
                : 'bg-slate-50 text-slate-800'
            }`}>
              {/* Header */}
              <header className="bg-teal-600 text-white p-6 rounded-b-3xl shadow-lg relative overflow-hidden">
                <div className="absolute top-0 right-0 opacity-20 transform translate-x-4 -translate-y-4 pointer-events-none">
                  <Waves size={120} />
                </div>
                <div className="flex justify-between items-start">
                  <div>
                    <h1 className="text-2xl font-bold mb-2 flex items-center gap-2">
                      <MapPin className="fill-teal-200 text-teal-800" size={24} fill="currentColor" />
                      다낭 한달 살기
                    </h1>
                    <p className="text-teal-100 text-sm opacity-90">
                      느리게 걷는 여행, 일주일에 3곳만
                    </p>
                  </div>
                  <div className="flex gap-2">
                    <button
                      onClick={toggleDarkMode}
                      className="bg-teal-700/50 hover:bg-teal-700 text-white p-2 rounded-lg transition-colors"
                      title={isDarkMode ? '라이트 모드로 전환' : '다크 모드로 전환'}
                    >
                      {isDarkMode ? <Sun size={20} /> : <Moon size={20} />}
                    </button>
                    <button
                      onClick={resetAllTasks}
                      className="bg-teal-700/50 hover:bg-teal-700 text-white p-2 rounded-lg transition-colors"
                      title="모든 체크 초기화"
                    >
                      <Trash2 size={20} />
                    </button>
                  </div>
                </div>

                {/* Progress Bar */}
                <div className="mt-6">
                  <div className="flex justify-between text-xs text-teal-100 mb-1 px-1">
                    <span>시작</span>
                    <span>{Math.round((Object.keys(completedTasks).length / 84) * 100)}% 완료</span>
                  </div>
                  <div className="h-2 bg-teal-800/30 rounded-full overflow-hidden">
                    <div
                      className="h-full bg-amber-300 transition-all duration-500 ease-out"
                      style={{ width: `${(Object.keys(completedTasks).length / 84) * 100}%` }}
                    ></div>
                  </div>
                </div>
              </header>

              {/* Week Selector */}
              <div className="px-4 py-6">
                <div className={`flex justify-between gap-2 p-2 rounded-xl shadow-sm ${
                  isDarkMode ? 'bg-slate-800' : 'bg-white'
                }`}>
                  {[1, 2, 3, 4].map((week) => (
                    <button
                      key={week}
                      onClick={() => setActiveWeek(week)}
                      className={`flex-1 py-2 rounded-lg text-sm font-semibold transition-all ${
                        activeWeek === week
                          ? 'bg-teal-100 text-teal-700 shadow-inner'
                          : isDarkMode
                            ? 'text-slate-400 hover:bg-slate-700'
                            : 'text-slate-400 hover:bg-slate-50'
                      }`}
                    >
                      {week}주차
                    </button>
                  ))}
                </div>
              </div>

              {/* Content Area */}
              <main className="px-4 pb-24">
                <div className="mb-6">
                  <h2 className={`text-xl font-bold flex items-center gap-2 ${
                    isDarkMode ? 'text-slate-100' : 'text-slate-800'
                  }`}>
                    <span className="bg-teal-600 text-white w-8 h-8 rounded-full flex items-center justify-center text-sm shadow-md">
                      {activeWeek}
                    </span>
                    {currentSchedule.title}
                  </h2>
                  <p className={`text-sm ml-10 mt-1 ${
                    isDarkMode ? 'text-slate-400' : 'text-slate-500'
                  }`}>{currentSchedule.desc}</p>
                </div>

                <div className="space-y-4">
                  {currentSchedule.days.map((day) => (
                    <div key={day.id} className={`rounded-2xl p-5 shadow-sm border hover:shadow-md transition-shadow ${
                      isDarkMode
                        ? 'bg-slate-800 border-slate-700'
                        : 'bg-white border-slate-100'
                    }`}>
                      <div className="flex justify-between items-start mb-3">
                        <div className="flex items-center gap-3">
                          <span className="text-slate-400 font-bold text-sm">{day.day}</span>
                          <span className={`text-xs font-medium px-2 py-1 rounded-full flex items-center gap-1 ${getTypeStyle(day.type)}`}>
                            {getTypeIcon(day.type)}
                            {getTypeLabel(day.type)}
                          </span>
                        </div>
                      </div>

                      <h3 className={`font-bold text-lg mb-3 ${
                        isDarkMode ? 'text-slate-100' : 'text-slate-800'
                      }`}>{day.title}</h3>

                      <div className="space-y-2">
                        {day.activities.map((activity, idx) => {
                          const isDone = completedTasks[`${day.id}-${idx}`];
                          return (
                            <div
                              key={idx}
                              onClick={() => toggleTask(day.id, idx)}
                              className={`flex items-center gap-3 p-2 rounded-lg cursor-pointer group ${
                                isDarkMode ? 'hover:bg-slate-700' : 'hover:bg-slate-50'
                              }`}
                            >
                              <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${
                                isDone
                                  ? 'bg-teal-500 border-teal-500'
                                  : 'border-slate-300 group-hover:border-teal-400'
                              }`}>
                                {isDone && <CheckCircle2 size={14} className="text-white" />}
                              </div>
                              <span className={`text-sm transition-colors ${
                                isDone
                                  ? 'text-slate-400 line-through'
                                  : isDarkMode
                                    ? 'text-slate-300'
                                    : 'text-slate-600'
                              }`}>
                                {activity}
                              </span>
                            </div>
                          );
                        })}
                      </div>
                    </div>
                  ))}
                </div>
              </main>

              {/* Floating Tips Button/Panel (Static for demo) */}
              <div className="fixed bottom-6 right-6 z-10">
                <button className="bg-amber-400 text-white p-4 rounded-full shadow-lg hover:bg-amber-500 transition-transform hover:scale-105 flex items-center gap-2 font-bold">
                  <Info size={20} />
                  <span>꿀팁</span>
                </button>
              </div>
            </div>
          );
        };

        // Render the component
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DaNangMonthStay />);
    </script>
</body>
</html>
